<div class="offcanvas-header">
  <h5 class="offcanvas-title" id="offcanvas-menuLabel-product">Product Management</h5>
  <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
</div>
<hr>
<div class="offcanvas-body">
  <div class="row">
    <div class="col-12">
      <h6>Add a Product</h6>
      {% if user.is_superuser %}
      <form method="POST" action="{% url 'add_product' %}" class="form mb-2" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row">
            <div class="col-12">
                <div class="row p-2">
                    <div class="form-group col-md-12">
                        {{ form_regular.name|as_crispy_field }}
                    </div>
                </div>
                <div class="row p-2">
                    <div class="form-group col-md-12">
                        {{ form_regular.category|as_crispy_field }}
                    </div>
                </div>
                <div class="row p-2">
                    <div class="form-group col-md-12">
                        {{ form_regular.description|as_crispy_field }}
                    </div>
                </div>
                <div class="row p-2">
                    <div class="form-group col-md-12">
                        {{ form_regular.price|as_crispy_field }}
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="row align-items-top justify-content-around p-2">
                    <div class="form-group col-6 col-md-5">
                        {{ form_regular.sizes|as_crispy_field }}
                    </div>
                    <div class="form-group col-6 col-md-5">
                        {{ form_regular.colours|as_crispy_field }}
                    </div>
                </div>
                <hr>
                <div class="row align-items-top justify-content-around p-2 mt-2">
                    <div class="form-group col-6 col-md-5">
                        {{ form_regular.secondary_colour|as_crispy_field }}
                    </div>
                    <div class="form-group col-6 col-md-5">
                        {{ form_regular.learn_product|as_crispy_field }}
                    </div>
                </div>
                <div class="row p-2">
                    <div class="form-group col-md-5">
                        {{ form_regular.image|as_crispy_field }}
                    </div>
                </div>
            </div>
            <div class="col-6 mx-auto my-3">
                    <button class="btn btn-custom p-2 w-100" type="submit">Add Product<i class="fa-solid fa-plus ms-2"></i></button>
            </div>
        </div>
    </form>
    </div>
    {% endif %}
    <div class="col-7">
      <h6>Order History</h6>
      <div class="order-history-container mt-4 p-3">
        {% for order in orders %}
        <div class="row">
          <div class="col-12 small">
            <p class="my-1 m-0">Order Number:</p>
          </div>
          <div class="col-12 small">
            <span class="mb-1 m-0">{{order.order_number}}</span>
          </div>
          <div class="col-12 small">
            <p class="my-1 m-0">Order Date:</p>
          </div>
          <div class="col-12 small">
            <span class="mb-1 m-0">{{order.date}}</span>
          </div>
          <div class="col-12 small">
            <p class="my-1 m-0">Order Items:</p>
          </div>
          {% for item in order.lineitems.all %}
          <div class="col-3 my-1">
            {% if item.product.image %}
            <a href="{{ item.product.image.url }}" target="_blank">
              <img class="w-100" src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
            </a>
            {% else %}
            <img class="w-100" src="https://placeholder.pics/svg/300x300/DEDEDE/555555/No%20Image%20available"
              alt="{{ item.product.name}}">
            {% endif %}
          </div>
          <div class="col-9 small">
            <p class="my-0"><strong>{{ item.product.name }}</strong></p>
            {% if item.product_size or item.product_primary_colour %}
            <div class="row">
              {% if item.product_size %}
              <div class="col-12 small">
                Size: {{ item.product_size|upper}}
              </div>
              {% endif %}
              {% if item.product_primary_colour %}
              <div class="col-12 small">
                Primary Colour: {{ item.product_primary_colour|upper}}
              </div>
              {% endif %}
              {% if item.product_secondary_colour %}
              <div class="col-12 small">
                Secondary Colour: {{ item.product_secondary_colour|upper}}
              </div>
              {% endif %}
            </div>
            {% endif %}
            <p class="my-0 small text-muted">Qty: {{ item.quantity }}</p>
          </div>
          {% endfor %}
          <div class="col-12 small">
            <p class="my-1 m-0">Order Grand Total:</p>
          </div>
          <div class="col-12 small">
            <strong>
              <span class="mb-1 m-0">â‚¬{{order.grand_total}}</span>
            </strong>
          </div>
        </div>
        <hr class="profile-hr mx-4">
        {% endfor %}
      </div>
    </div>
  </div>
</div>